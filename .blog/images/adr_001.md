# 001 Architectural Design Record (ADR):  CCAF Statements Tracker App


<!-- toc -->
+ [**Status**](#status)
+ [**Context**](#context)
+ [**Decision**](#decision)
+ [**Y-Statement**](#y-statement)
+ [**Consequences**](#consequences)
+ [**Positive**](#positive)
+ [**Negative/Trade-off(s)**](#negativetrade-offs)
<!-- tocstop -->

## Status
Development - **IN PROGRESS**

## Context
While developing a reason CCAF app, I learned that the `DROP TABLE` statement only removes a table definition from Apache Flink. It may delete associated resources, such as the Kafka topic and schemas in the Schema Registry, depending on the table type. However, the `RUNNING` statement must be stopped manually through the Dashboard, CLI, or REST API. Additionally, the `DROP TABLE` operation is not atomic; if the deletion of the Kafka topic or schema fails, the operation may only complete partially. It's important to note that dropping a table permanently deletes the data in the Kafka topic. Any running statements that depend on a dropped table will shift to `DEGRADED` status. A `DEGRADED` statement will not produce results but will continue to consume data from the source. Therefore, it is advisable to stop dependent statements before dropping a table. When using the `TopicNameStrategy`, dropping a table will result in deleting schemas, even if other topics use them.

There must be a way to automate the process of halting the running statements before dropping the table. Additionally, to ensure the table is dropped successfully, including, if applicable, the associated resources such as the Kafka topic and schemas in the Schema Registry.

## Decision
Create an application that stops all running statements related to a table before dropping it. The application will also be capable of dropping the table along with its associated resources, such as the Kafka topic and schemas in the Schema Registry. However, ensure that it can perform these actions, or notify the calling application if it is unable to do so for any reason.

## Y-Statement

## Consequences

### Positive

### Negative/Trade-off(s)
